<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Divvy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <!-- Landing Screen -->
    <div id="landing-screen" class="screen active-screen">
      <div class="landing-container">
        <h1 class="app-title">divvy</h1>
        <p class="subtitle">Split bills with friends, fast.</p>

        <div class="card">
          <h2>Join a divvy</h2>
          <div class="input-row">
            <input
              id="join-code-input"
              type="text"
              maxlength="5"
              placeholder="Enter 5-letter code"
              class="code-input"
            />
            <button id="join-divvy-btn" class="primary-btn">Join</button>
          </div>
        </div>

        <div class="card">
          <h2>Create a new divvy</h2>
          <button id="create-divvy-btn" class="secondary-btn full-width">
            Create divvy
          </button>
          <p class="hint">A 5-letter code will be generated for you.</p>
        </div>

        <p id="landing-error" class="error-text"></p>
      </div>
    </div>

    <!-- Main Divvy Screen -->
    <div id="divvy-screen" class="screen">
      <!-- Top bar: currency + divvy name / code -->
      <div class="top-bar">
        <div class="currency-selector">
          <span id="currency-flag" class="currency-flag">ðŸ‡ºðŸ‡¸</span>
          <select id="currency-select">
            <option value="USD" selected>USD $</option>
            <option value="GBP">GBP Â£</option>
            <option value="EUR">EUR â‚¬</option>
            <option value="AED">AED Ø¯.Ø¥</option>
            <option value="INR">INR â‚¹</option>
            <option value="JPY">JPY Â¥</option>
          </select>
        </div>
        <div class="divvy-title-block">
          <div class="divvy-name-row">
            <span id="divvy-name-display" class="divvy-name-display">Unnamed divvy</span>
            <button id="edit-divvy-name-btn" class="tiny-btn">Edit</button>
          </div>
          <div class="divvy-code-row-header">
            <span class="label">Code:</span>
            <span id="divvy-code-display" class="code-display"></span>
          </div>
        </div>
        <button id="leave-divvy-btn" class="small-btn">Leave</button>
      </div>

      <header class="divvy-header">
        <div class="members-header-row">
          <div class="members-header-left">
            <h2>Members</h2>
          </div>
          <button id="add-member-btn" class="small-primary-btn">
            + Add member
          </button>
        </div>

        <div id="members-list" class="chip-list">
          <!-- Members chips -->
        </div>
      </header>

      <main class="divvy-main">
        <div class="receipts-header">
          <h2>Receipts</h2>
          <button id="add-receipt-btn" class="primary-btn">+ Add receipt</button>
        </div>

        <div id="receipts-list">
          <!-- Receipts feed -->
        </div>
      </main>
    </div>

    <!-- Receipt Editor Modal -->
    <div id="receipt-modal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h2 id="receipt-modal-title">New receipt</h2>
          <button id="close-receipt-modal-btn" class="icon-btn">&times;</button>
        </div>

        <div class="modal-body" id="receipt-modal-body">
          <!-- Step 1: Basic info -->
          <section class="modal-section">
            <h3>Receipt details</h3>
            <label class="field-label">Receipt name (optional)</label>
            <input
              id="receipt-name-input"
              type="text"
              placeholder="e.g. Dinner, Uber, Groceries"
            />

            <label class="field-label">Collector (who is owed?)</label>
            <div class="member-select-block">
              <input
                id="collector-search-input"
                type="text"
                placeholder="Search members"
                class="search-input"
              />
              <div class="member-select-actions">
                <button id="collector-add-member-btn" class="tiny-btn">
                  + Add member
                </button>
              </div>
              <div id="collector-options" class="chip-list selectable">
                <!-- Member options -->
              </div>
            </div>

            <p id="collector-error" class="error-text"></p>
          </section>

          <!-- Step 2: Debtors -->
          <section class="modal-section">
            <h3>Debtors (who owes?)</h3>
            <input
              id="debtors-search-input"
              type="text"
              placeholder="Search members"
              class="search-input"
            />
            <div class="member-select-actions">
              <button id="debtors-add-member-btn" class="tiny-btn">
                + Add member
              </button>
            </div>
            <div id="debtors-options" class="chip-list selectable">
              <!-- Member chips; multi-select -->
            </div>
            <p id="debtors-error" class="error-text"></p>
          </section>

          <!-- Step 3: Expenses -->
          <section class="modal-section">
            <h3>Expenses</h3>
            <div class="expenses-header-row">
              <button id="add-expense-btn" class="secondary-btn small">
                + Add expense
              </button>
            </div>

            <div id="expenses-list">
              <!-- Expense items -->
            </div>
          </section>

          <!-- Step 4: Publish -->
          <section class="modal-section">
            <h3>Assign and publish</h3>
            <p class="small-text">
              Assign each expense to the correct people. If you pick multiple members for an expense,
              it will be split evenly between them.
            </p>
            <button id="publish-receipt-btn" class="primary-btn full-width">
              Publish receipt
            </button>
            <p id="publish-error" class="error-text"></p>
          </section>
        </div>
      </div>
    </div>

    <!-- Member Detail Modal -->
    <div id="member-modal" class="modal-overlay">
      <div class="modal large-modal">
        <div class="modal-header">
          <h2 id="member-modal-title">Member</h2>
          <button id="close-member-modal-btn" class="icon-btn">&times;</button>
        </div>
        <div class="modal-body member-modal-body">
          <section>
            <h3>Aggregate settlements</h3>
            <div id="member-aggregate-list" class="payment-list">
              <!-- Aggregate net settlements -->
            </div>
            <!-- Divider between aggregate and details -->
            <hr style="margin: 10px 0; border: 0; border-top: 1px solid #272c40;" />
          </section>

          <section>
            <h3>Outstanding payments</h3>
            <div id="member-outstanding-list" class="payment-list">
              <!-- Outstanding items -->
            </div>
          </section>
          <section>
            <h3>Who owes them</h3>
            <div id="member-owed-by-list" class="payment-list">
              <!-- Who owes this member -->
            </div>
          </section>
          <section>
            <h3>Completed payments</h3>
            <div id="member-paid-list" class="payment-list">
              <!-- Paid items -->
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- Prompt modal -->
    <div id="prompt-modal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h2 id="prompt-title">Prompt</h2>
        </div>
        <div class="modal-body">
          <p id="prompt-message"></p>
          <input id="prompt-input" type="text" />
          <div class="prompt-buttons">
            <button id="prompt-cancel-btn" class="secondary-btn">Cancel</button>
            <button id="prompt-ok-btn" class="primary-btn">OK</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Split options modal -->
    <div id="split-modal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h2>Split expense</h2>
          <button id="split-cancel-btn" class="icon-btn">&times;</button>
        </div>
        <div class="modal-body">
          <p class="small-text">
            Choose how to split this expense into multiple items.
          </p>
          <div class="split-section">
            <h3>Split into equal parts</h3>
            <label class="field-label">Number of parts</label>
            <input
              id="split-equal-count-input"
              type="number"
              min="2"
              step="1"
              value="2"
            />
            <button id="split-equal-btn" class="secondary-btn full-width">
              Split equally
            </button>
          </div>

          <div class="split-divider">or</div>

          <div class="split-section">
            <h3>Split by percentage</h3>
            <p class="small-text">
              Enter percentages separated by commas, e.g. 40,60 or 25,25,50.
            </p>
            <input
              id="split-percentages-input"
              type="text"
              placeholder="e.g. 50,50"
            />
            <button id="split-percent-btn" class="secondary-btn full-width">
              Split by percentage
            </button>
          </div>

          <p id="split-error" class="error-text"></p>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
